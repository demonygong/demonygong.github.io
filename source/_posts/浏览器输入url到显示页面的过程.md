---
title: 浏览器输入url到显示页面的过程
date: 2020-12-11 18:38:59
tags:
- 
---

&ensp;&ensp;&ensp;&ensp;在上网过程中，常常会在浏览器中输入各种各样的URL或者网址，然后浏览器就会渲染出对应的网页。其实从输入URL到页面展示在我们眼前所经历的过程其实还是非常复杂的，其中很多知识都会有专门的学科去研究，所以这里只是简单地概括一下大致流程：
<!--more-->
* DNS解析
* TCP链接（三次挥手）
* HTTP请求
* 服务器处理HTTP
* 页面渲染
* 断开TCP链接（四次挥手）


## DNS解析
&ensp;&ensp;&ensp;&ensp;DNS域名解析，说白了就是查询的过程。从所输入的url中通过一定方式查询到所处的IP地址。

## TCP链接（三次握手）
- 客服端向服务器发送请求报文，等待确认
- 服务器确定请求报文，并向客户端发送确认信息
- 客服端向服务器发送确认信息，与服务器建立连接

## HTTP请求
&ensp;&ensp;&ensp;&ensp;一个HTTP请求报文由请求行、请求头、请求正文组成。

## 服务器处理HTTP
&ensp;&ensp;&ensp;&ensp;服务器端响应HTTP请求，浏览器得到HTML代码。这里HTTP响应报文返回状态码、响应头和响应体。

## 页面渲染
### 这里说一下浏览器渲染机制：
1. 识别标签
2. 标签转成Node节点，生成DOM树
3. CSS解析，生成CSSOM树
4. Render Tree（渲染树）：DOM和CSSOM合并后生成
    - 重绘（修改外观样式）
    - 回流（布局或几何属性的修改）
    - 回流的代价要远大于重绘。且回流必然会造成重绘，但重绘不一定会造成回流


## 断开TCP链接（四次挥手）
- 客服端向服务器发送关闭请求
- 服务器确认接收请求，向客户端返回准备断开信息
- 服务器断开连接，向客户端发送断开信息
- 客户端发回报文确认
